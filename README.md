# Ù¾Ú©ÛŒØ¬ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ÛŒÙˆÙ…ØªØ±ÛŒÚ© Ù„Ø§Ø±Ø§ÙˆÙ„

[![Latest Version](https://img.shields.io/packagist/v/sajadsoft1/biometric-device.svg?style=flat-square)](https://packagist.org/packages/sajadsoft1/biometric-device)
[![Total Downloads](https://img.shields.io/packagist/dt/sajadsoft1/biometric-device.svg?style=flat-square)](https://packagist.org/packages/sajadsoft1/biometric-device)
[![License](https://img.shields.io/packagist/l/sajadsoft1/biometric-device.svg?style=flat-square)](https://packagist.org/packages/sajadsoft1/biometric-device)

Ù¾Ú©ÛŒØ¬ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ù…Ø­ÙˆØ± Ù„Ø§Ø±Ø§ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ÛŒÙˆÙ…ØªØ±ÛŒÚ© (Ø§Ø³Ú©Ù†Ø± Ø§Ø«Ø± Ø§Ù†Ú¯Ø´ØªØŒ ØªØ´Ø®ÛŒØµ Ú†Ù‡Ø±Ù‡ØŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ú©Ù†ØªØ±Ù„ ØªØ±Ø¯Ø¯).

## ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§

- **Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ù…Ø­ÙˆØ±** - Ú©Ø§Ù…Ù„Ø§Ù‹ Event-driven
- **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² DTO** - Ø§Ø´ÛŒØ§Ø¡ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¯Ø§Ø¯Ù‡ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙ‚Ù„Ø§Ù„ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡
- **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ù¾Ø±ÙˆØªÚ©Ù„â€ŒÙ‡Ø§ÛŒ Ù…ØªØ¹Ø¯Ø¯** - WebSocketØŒ TCP/IPØŒ HTTPØŒ MQTT (Ù‚Ø§Ø¨Ù„ ØªÙˆØ³Ø¹Ù‡)
- **Ù…Ø¹Ù…Ø§Ø±ÛŒ ØªÙ…ÛŒØ²** - Ù¾ØªØ±Ù†â€ŒÙ‡Ø§ÛŒ StrategyØŒ Pipeline Ùˆ Handler
- **Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙˆØ±Ø§Øª** - Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
- **Ù…Ø³ØªÙ†Ø¯Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„** - Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¬Ø§Ù…Ø¹ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ Ùˆ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
- **Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Laravel 11/12** - Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù„Ø§Ø±Ø§ÙˆÙ„ Ù…Ø¯Ø±Ù†

## Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´Ø¯Ù‡

- Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ WebSocket Ø²Ù…Ø§Ù† Ùˆ Ø­Ø¶ÙˆØ± AIFace (AiFaceØŒ FaceLiteØŒ SpeedFace Ùˆ ØºÛŒØ±Ù‡)
- Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ WebSocket Ø²Ù…Ø§Ù† Ùˆ Ø­Ø¶ÙˆØ± ZKTeco (Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ AIFace)
- Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ TCP/IP Ø²Ù…Ø§Ù† Ùˆ Ø­Ø¶ÙˆØ± (Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ)
- Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ (Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø±Ø§Ø¨Ø· DataMapper)
- **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù‡Ù…Ø²Ù…Ø§Ù† Ø§Ø² Ú†Ù†Ø¯ Ù†ÙˆØ¹ Ø¯Ø³ØªÚ¯Ø§Ù‡** - Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ Ø·ÙˆØ± Ù‡Ù…Ø²Ù…Ø§Ù† Ø§Ø² Ø§Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„Ù Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

## Ù†ØµØ¨

```bash
composer require sajadsoft1/biometric-device
```

### Ø§Ù†ØªØ´Ø§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ú©ÛŒØ¬

```bash
# Ø§Ù†ØªØ´Ø§Ø± ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ
php artisan vendor:publish --tag=biometric-devices-config

# Ø§Ù†ØªØ´Ø§Ø± migrations (Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± load Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯)
php artisan vendor:publish --tag=biometric-devices-migrations

# Ø§Ø¬Ø±Ø§ÛŒ migrations
php artisan migrate
```

**Ù†Ú©Ø§Øª Ù…Ù‡Ù…:**
- Migration Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± load Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ publish Ù†ÛŒØ³Øª
- Migration Ù‡Ø§ÛŒ Ù¾Ú©ÛŒØ¬ Ø¨Ø§ ØªØ§Ø±ÛŒØ® `2020_01_01` Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ ØªØ§ Ù‡Ù…ÛŒØ´Ù‡ **Ù‚Ø¨Ù„** Ø§Ø² migration Ù‡Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø´Ù…Ø§ Ø§Ø¬Ø±Ø§ Ø´ÙˆÙ†Ø¯
- Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒØŒ migration Ù‡Ø§ ØªØ¯Ø§Ø®Ù„ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯

Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯:
- `config/biometric-devices.php` - ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ú©ÛŒØ¬

Migration Ù‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± (Auto-load):
- `2020_01_01_000001_create_devices_table.php` - Ø¬Ø¯ÙˆÙ„ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§
- `2020_01_01_000002_create_device_commands_table.php` - Ø¬Ø¯ÙˆÙ„ Ø¯Ø³ØªÙˆØ±Ø§Øª

## ğŸš€ Ø´Ø±ÙˆØ¹ Ø³Ø±ÛŒØ¹

### Ù…Ø±Ø§Ø­Ù„ Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¯Ø± 5 Ø¯Ù‚ÛŒÙ‚Ù‡

#### Û±. Ù†ØµØ¨ Ù¾Ú©ÛŒØ¬

```bash
composer require sajadsoft1/biometric-device
php artisan vendor:publish --tag=biometric-devices-config
php artisan migrate
```

#### Û². Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ (.env)

```env
BIOMETRIC_WS_HOST=0.0.0.0
BIOMETRIC_WS_PORT=7788
BIOMETRIC_DRIVER=websocket
BIOMETRIC_DEVICE_TYPE=aiface
```

#### Û³. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±

```bash
php artisan biometric:start-server
```

#### Û´. Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù† Ø¨Ù‡ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§

**ğŸ”” Ù†Ú©ØªÙ‡ Ù…Ù‡Ù… (Laravel 11+):**  
Ø¯Ø± **Laravel 11 Ùˆ Ø¨Ø§Ù„Ø§ØªØ±**ØŒ Listener Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª **Ø®ÙˆØ¯Ú©Ø§Ø±** Ú©Ø´Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ (Auto-Discovery). Ø§Ú¯Ø± Ù…ØªØ¯ Listener Ø´Ù…Ø§ type-hint Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ **Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø«Ø¨Øª Ø¯Ø³ØªÛŒ Ø¯Ø± `AppServiceProvider` Ù†ÛŒØ³Øª**:

```php
// app/Listeners/SaveAttendance.php
// âœ… Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø«Ø¨Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯

use Sajadsoft\BiometricDevices\Events\AttendanceReceived;

class SaveAttendance
{
    // Laravel Ø¨Ù‡ Ø·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÛŒÙ† Ù…ØªØ¯ Ø±Ø§ Ø¨Ù‡ AttendanceReceived ÙˆØµÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
    public function handle(AttendanceReceived $event)
    {
        // ...
    }
}
```

**Ø¨Ø±Ø§ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Auto-Discovery Ùˆ Ø«Ø¨Øª Ø¯Ø³ØªÛŒ:**

```php
// app/Providers/AppServiceProvider.php

public function boot(): void
{
    // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Auto-Discovery
    Event::shouldDiscoverEvents(false);
    
    // Ø«Ø¨Øª Ø¯Ø³ØªÛŒ Listener Ù‡Ø§
    Event::listen(
        AttendanceReceived::class,
        \App\Listeners\SaveAttendance::class,
    );
}
```

**Ø¨Ø±Ø§ÛŒ Laravel 10 Ùˆ Ù‚Ø¨Ù„â€ŒØªØ±** (Ø«Ø¨Øª Ø¯Ø³ØªÛŒ Ø¯Ø± EventServiceProvider):

```php
// app/Providers/EventServiceProvider.php

protected $listen = [
    AttendanceReceived::class => [
        \App\Listeners\SaveAttendance::class,
    ],
    UserListReceived::class => [
        \App\Listeners\SyncUsers::class,
    ],
];
```

### Û´. Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§

```php
// app/Listeners/SaveAttendance.php

use Sajadsoft\BiometricDevices\Events\AttendanceReceived;

class SaveAttendance
{
    public function handle(AttendanceReceived $event)
    {
        $dto = $event->attendance; // AttendanceDTO
        
        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
        AttendanceLog::create([
            'employee_id' => $dto->employeeId,
            'employee_name' => $dto->employeeName,
            'check_time' => $dto->timestamp,
            'is_check_in' => $dto->isCheckIn,
            'verification' => $dto->verificationType->label(),
            'temperature' => $dto->temperature,
        ]);
    }
}
```

### Ûµ. Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ø² Ø·Ø±ÛŒÙ‚ Facade

```php
use Sajadsoft\BiometricDevices\Facades\BiometricDevice;
use Sajadsoft\BiometricDevices\DTOs\Commands\AddUserDTO;
use Sajadsoft\BiometricDevices\DTOs\Commands\OpenDoorDTO;
use Sajadsoft\BiometricDevices\Enums\BiometricType;

// Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
BiometricDevice::getUserList('DEVICE_SERIAL');

// Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡
$addUser = new AddUserDTO(
    employeeId: 100,
    name: 'Ø¹Ù„ÛŒ Ø§Ø­Ù…Ø¯ÛŒ',
    biometricType: BiometricType::FINGERPRINT_0,
    biometricData: 'base64_template...',
    isAdmin: false
);

BiometricDevice::addUser('DEVICE_SERIAL', $addUser);

// Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø±Ø¨
BiometricDevice::openDoor('DEVICE_SERIAL', new OpenDoorDTO(doorNumber: 1));

// Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡
BiometricDevice::getDeviceInfo('DEVICE_SERIAL');
```

**Ù†Ú©Ø§Øª Ù…Ù‡Ù…:**
- âœ… **Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±**: Ù¾Ú©ÛŒØ¬ Ø®ÙˆØ¯Ø´ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ø§ Ø¯Ø± Ø¬Ø¯ÙˆÙ„ `device_commands` Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âœ… **ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±**: ÙˆØ¶Ø¹ÛŒØª Ø¯Ø³ØªÙˆØ±Ø§Øª (PENDING â†’ SENT â†’ SUCCESS/FAILED) Ø®ÙˆØ¯Ú©Ø§Ø± ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âœ… **Ø§Ø±Ø³Ø§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø±**: Ø³Ø±ÙˆØ± WebSocket Ù‡Ø± Û± Ø«Ø§Ù†ÛŒÙ‡ Ø¯Ø³ØªÙˆØ±Ø§Øª pending Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âœ… **Event Ù‡Ø§**: Ù‡Ù…Ú†Ù†Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ ÙØ§ÛŒØ± Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- â„¹ï¸ **Listener Ù‡Ø§ Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ù‡Ø³ØªÙ†Ø¯**: Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ù†ÙˆØ´ØªÙ† Listener Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡/Ø¢Ù¾Ø¯ÛŒØª Ø¯Ø³ØªÙˆØ±Ø§Øª Ù†ÛŒØ³Øª

## Ù…Ø¹Ù…Ø§Ø±ÛŒ

### Ø¬Ø±ÛŒØ§Ù† Ø¯Ø±ÛŒØ§ÙØª Ø±ÙˆÛŒØ¯Ø§Ø¯

```
Device â†’ Driver â†’ Pipeline â†’ Handler â†’ Mapper â†’ DTO â†’ Event â†’ Your Listener
```

### Ø¬Ø±ÛŒØ§Ù† Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ±

```
Your Code â†’ Facade â†’ Manager â†’ Mapper â†’ DTO â†’ Command â†’ Driver â†’ Device
```

## Ù…Ø¯ÛŒØ±ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§

### ğŸ¯ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±

Ù¾Ú©ÛŒØ¬ **Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø±** Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø°Ø®ÛŒØ±Ù‡ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø¢Ù†Ù„Ø§ÛŒÙ†/Ø¢ÙÙ„Ø§ÛŒÙ† Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

#### ğŸŸ¢ Ø§ØªØµØ§Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡ (Automatic)
```
1. Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¨Ù‡ Ø³Ø±ÙˆØ± WebSocket Ù…ØªØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
   â†“
2. Ù¾Ú©ÛŒØ¬ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯
   â†“
3. Device::updateOrCreate() â† Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±
   - serial
   - name
   - ip_address
   - port
   - is_online = true
   - last_connected_at
   - extra_attributes (firmware, capacity, etc.)
   â†“
4. event(new DeviceConnected()) â† Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ
   - Ø´Ø§Ù…Ù„ Device model
   - Ø´Ø§Ù…Ù„ DeviceInfoDTO
```

#### ğŸ”´ Ù‚Ø·Ø¹ Ø¯Ø³ØªÚ¯Ø§Ù‡ (Automatic)
```
1. Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø§Ø² Ø³Ø±ÙˆØ± Ù‚Ø·Ø¹ Ù…ÛŒâ€ŒØ´ÙˆØ¯
   â†“
2. Device::markAsOffline() â† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
   - is_online = false
   - last_disconnected_at
   â†“
3. event(new DeviceDisconnected()) â† Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ
```

### ğŸ“ Listener Ù‡Ø§ÛŒ Ø´Ù…Ø§ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)

Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø§ÛŒÙ†Ú©Ù‡ Ù¾Ú©ÛŒØ¬ Ø®ÙˆØ¯Ø´ Device Ø±Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Listener Ù‡Ø§ÛŒ Ø´Ù…Ø§ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ:
- Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ (Ù…Ø«Ù„ `club_id`, `device_type`)
- Ø§Ø±Ø³Ø§Ù„ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
- Ù¾Ø±Ø¯Ø§Ø²Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±

```php
// app/Listeners/UpdateDeviceStatus.php

class UpdateDeviceStatus
{
    public function handleConnected(DeviceConnected $event): void
    {
        // Ù¾Ú©ÛŒØ¬ Ù‚Ø¨Ù„Ø§Ù‹ Device Ø±Ø§ Ø°Ø®ÛŒØ±Ù‡ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª
        if ($event->device) {
            // ÙÙ‚Ø· ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†ÛŒØ¯
            $event->device->update([
                'device_type' => DeviceTypeEnum::AI_FACE,
                'club_id' => auth()->user()->club_id,
            ]);
        }
    }
    
    public function handleDisconnected(DeviceDisconnected $event): void
    {
        // Ù¾Ú©ÛŒØ¬ Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ¶Ø¹ÛŒØª offline Ø±Ø§ Ø°Ø®ÛŒØ±Ù‡ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª
        // Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²ØŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø¶Ø§ÙÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯
        Notification::send(
            User::admins(),
            new DeviceOfflineNotification($event->deviceSerial)
        );
    }
}
```

### ğŸ” Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Device Model

```php
use Sajadsoft\BiometricDevices\Models\Device;

// Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†
$onlineDevices = Device::online()->get();

// Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢ÙÙ„Ø§ÛŒÙ†
$offlineDevices = Device::offline()->get();

// Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
$device = Device::where('serial', 'AYSC01015584')->first();
if ($device->isOnline()) {
    // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ±
    BiometricDevice::getUserList($device->serial);
}

// Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯Ø³ØªÙˆØ±Ø§Øª
$pendingCommands = $device->pendingCommands;
$failedCommands = $device->failedCommands;
```

---

## Ù…Ø¯ÛŒØ±ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø³ØªÙˆØ±Ø§Øª

### ğŸ¯ Ø°Ø®ÛŒØ±Ù‡ Ùˆ ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±

Ù¾Ú©ÛŒØ¬ **Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ø§Ù…Ù„ Ø®ÙˆØ¯Ú©Ø§Ø±** Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

#### 1ï¸âƒ£ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ± (Automatic Save)
```php
BiometricDevice::getUserList('AYSC01015584');
```

```
1. BiometricDeviceManager::sendRawCommand()
   â†“
2. âœ… DeviceCommand::create() â† Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙˆØ³Ø· Ù¾Ú©ÛŒØ¬
   - device_id
   - command_name = 'getuserlist'
   - command_content = {...}
   - status = PENDING
   - send_status = false
   â†“
3. event(new CommandSent(..., $command)) â† Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ
```

#### 2ï¸âƒ£ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡ (Automatic Status: SENT)
```
WebSocketDeviceDriver::checkPendingCommands() (Ù‡Ø± 1 Ø«Ø§Ù†ÛŒÙ‡)
   â†“
âœ… $command->markAsSent() â† ØªØºÛŒÛŒØ± Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙˆØ³Ø· Ù¾Ú©ÛŒØ¬
   - status = SENT
   - send_status = true
```

#### 3ï¸âƒ£ Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø³Ø® (Automatic Status: SUCCESS/FAILED)
```
Handler::handle($data)
   â†“
âœ… $this->updateCommandStatus(...) â† ØªØºÛŒÛŒØ± Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙˆØ³Ø· Ù¾Ú©ÛŒØ¬
   - status = SUCCESS ÛŒØ§ FAILED
   - executed_at = now()
   - response = {...}
   â†“
event(new CommandResponseReceived(...)) â† Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ
```

### ğŸ“ Listener Ù‡Ø§ÛŒ Ø´Ù…Ø§ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)

Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø§ÛŒÙ†Ú©Ù‡ Ù¾Ú©ÛŒØ¬ Ø®ÙˆØ¯Ø´ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ø§ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Listener Ù‡Ø§ÛŒ Ø´Ù…Ø§ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ:
- Ø§Ø±Ø³Ø§Ù„ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
- Ù„Ø§Ú¯ Ú¯Ø±ÙØªÙ† Ø§Ø¶Ø§ÙÛŒ
- Ù¾Ø±Ø¯Ø§Ø²Ø´â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±

```php
// app/Listeners/NotifyOnCommandFailed.php

class NotifyOnCommandFailed
{
    public function handle(CommandResponseReceived $event): void
    {
        // Ù¾Ú©ÛŒØ¬ Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ¶Ø¹ÛŒØª Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª
        
        if (!$event->success) {
            // Ø§Ø±Ø³Ø§Ù„ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
            Notification::send(
                User::admins(),
                new CommandFailedNotification($event->deviceSerial, $event->commandName)
            );
        }
    }
}
```

### ğŸ” Query Ø¯Ø³ØªÙˆØ±Ø§Øª

```php
use Sajadsoft\BiometricDevices\Models\DeviceCommand;

// Ø¯Ø³ØªÙˆØ±Ø§Øª pending
$pending = DeviceCommand::pending()->get();

// Ø¯Ø³ØªÙˆØ±Ø§Øª Ù†Ø§Ù…ÙˆÙÙ‚
$failed = DeviceCommand::failed()
    ->where('created_at', '>=', now()->subDay())
    ->get();

// Ø¯Ø³ØªÙˆØ±Ø§Øª ÛŒÚ© Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®Ø§Øµ
$device = Device::where('serial', 'AYSC01015584')->first();
$commands = $device->commands()
    ->where('command_name', 'getUserList')
    ->latest()
    ->get();
```

## ğŸ“‹ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª (Commands Reference)

### Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ùˆ Ù…ØªØ¯Ù‡Ø§ÛŒ Facade

| Ø¯Ø³ØªÙˆØ± | Ù…ØªØ¯ Facade | Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ | ØªÙˆØ¶ÛŒØ­Ø§Øª | Ù…Ø³ØªÙ†Ø¯Ø§Øª |
|-------|------------|-----------|---------|---------|
| **Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†** |
| `setuserinfo` | `addUser($serial, AddUserDTO)` | employeeId, name, biometricType, biometricData, isAdmin | Ø§ÙØ²ÙˆØ¯Ù†/ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø± | [ğŸ“–](docs/USAGE.md#1-Ø§Ø¶Ø§ÙÙ‡-Ú©Ø±Ø¯Ù†-Ú©Ø§Ø±Ø¨Ø±-Ø¨Ø§-Ø§Ø«Ø±-Ø§Ù†Ú¯Ø´Øª-fingerprint) |
| `deleteuser` | `deleteUser($serial, $employeeId, ?$type)` | employeeId, biometricType (optional) | Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø± ÛŒØ§ Ø¨ÛŒÙˆÙ…ØªØ±ÛŒÚ© Ø®Ø§Øµ | [ğŸ“–](docs/USAGE.md#6-Ø­Ø°Ù-Ú©Ø§Ø±Ø¨Ø±) |
| `getuserlist` | `getUserList($serial, $startFromBeginning)` | startFromBeginning (bool) | Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† | [ğŸ“–](docs/USAGE.md#7-Ø¯Ø±ÛŒØ§ÙØª-Ù„ÛŒØ³Øª-Ú©Ø§Ø±Ø¨Ø±Ø§Ù†) |
| `getuserinfo` | `sendRawCommand($serial, 'getuserinfo', [...])` | enrollid | Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ø¨ÛŒÙˆÙ…ØªØ±ÛŒÚ© | [ğŸ“–](docs/USAGE.md#8-Ø¯Ø±ÛŒØ§ÙØª-Ø§Ø·Ù„Ø§Ø¹Ø§Øª-ÛŒÚ©-Ú©Ø§Ø±Ø¨Ø±-Ø®Ø§Øµ) |
| `senduser` | - | - | Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®ÙˆØ¯Ø´ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ | - |
| **Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡** |
| `opendoor` | `openDoor($serial, $doorNumber)` | doorNumber, duration | Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø±Ø¨ | [ğŸ“–](docs/USAGE.md#1-Ø¨Ø§Ø²-Ú©Ø±Ø¯Ù†-Ø¯Ø±Ø¨) |
| `getdevinfo` | `getDeviceInfo($serial)` | - | Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ | [ğŸ“–](docs/USAGE.md#2-Ø¯Ø±ÛŒØ§ÙØª-Ø§Ø·Ù„Ø§Ø¹Ø§Øª-Ø¯Ø³ØªÚ¯Ø§Ù‡) |
| `reboot` | `reboot($serial)` | - | Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø¯Ø³ØªÚ¯Ø§Ù‡ | [ğŸ“–](docs/USAGE.md#3-Ø±Ø§Ù‡Ø§Ù†Ø¯Ø§Ø²ÛŒ-Ù…Ø¬Ø¯Ø¯-Ø¯Ø³ØªÚ¯Ø§Ù‡-reboot) |
| `initsys` | `initSystem($serial)` | - | âš ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ | [ğŸ“–](docs/USAGE.md#4-Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ-Ø§ÙˆÙ„ÛŒÙ‡-Ø³ÛŒØ³ØªÙ…-factory-reset) |
| `settime` | `sendRawCommand($serial, 'settime', [...])` | time | ØªÙ†Ø¸ÛŒÙ… Ø²Ù…Ø§Ù† Ø¯Ø³ØªÚ¯Ø§Ù‡ | [ğŸ“–](docs/USAGE.md#5-ØªÙ†Ø¸ÛŒÙ…-Ø²Ù…Ø§Ù†-Ø¯Ø³ØªÚ¯Ø§Ù‡) |
| **Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ** |
| `setuserlock` | `setUserAccess($serial, SetUserAccessDTO)` | employeeId, weekZone, group, startDate, endDate | ØªÙ†Ø¸ÛŒÙ… Ø¯Ø³ØªØ±Ø³ÛŒ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡ | [ğŸ“–](docs/USAGE.md#1-ØªÙ†Ø¸ÛŒÙ…-Ø¯Ø³ØªØ±Ø³ÛŒ-Ø²Ù…Ø§Ù†Ø¨Ù†Ø¯ÛŒ-Ø´Ø¯Ù‡-Ú©Ø§Ø±Ø¨Ø±) |
| `setdevlock` | `sendRawCommand($serial, 'setdevlock', [...])` | locked (bool) | Ù‚ÙÙ„/Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø³ØªÚ¯Ø§Ù‡ | [ğŸ“–](docs/USAGE.md#2-Ù‚ÙÙ„-Ú©Ø±Ø¯Ù†Ø¨Ø§Ø²-Ú©Ø±Ø¯Ù†-Ø¯Ø³ØªÚ¯Ø§Ù‡) |
| `getuserlock` | `sendRawCommand($serial, 'getuserlock', [...])` | enrollid | Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª Ù‚ÙÙ„ Ú©Ø§Ø±Ø¨Ø± | - |
| `getdevlock` | `sendRawCommand($serial, 'getdevlock', [...])` | - | Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª Ù‚ÙÙ„ Ø¯Ø³ØªÚ¯Ø§Ù‡ | - |
| **Ù…Ø¯ÛŒØ±ÛŒØª Ù„Ø§Ú¯â€ŒÙ‡Ø§** |
| `sendlog` | - | - | Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®ÙˆØ¯Ø´ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ | - |
| `getalllog` | `sendRawCommand($serial, 'getalllog', [...])` | stn | Ø¯Ø±ÛŒØ§ÙØª ØªÙ…Ø§Ù… Ù„Ø§Ú¯â€ŒÙ‡Ø§ | [ğŸ“–](docs/USAGE.md#1-Ø¯Ø±ÛŒØ§ÙØª-ØªÙ…Ø§Ù…-Ù„Ø§Ú¯Ù‡Ø§) |
| `getnewlog` | `sendRawCommand($serial, 'getnewlog', [...])` | stn | Ø¯Ø±ÛŒØ§ÙØª Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ | [ğŸ“–](docs/USAGE.md#2-Ø¯Ø±ÛŒØ§ÙØª-Ù„Ø§Ú¯Ù‡Ø§ÛŒ-Ø¬Ø¯ÛŒØ¯) |
| **Ø³Ø§ÛŒØ±** |
| `reg` | - | - | Ø«Ø¨Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ (Ø®ÙˆØ¯Ú©Ø§Ø±) | - |
| `sendqrcode` | - | - | Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®ÙˆØ¯Ø´ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ | - |
| `setusername` | `sendRawCommand($serial, 'setusername', [...])` | enrollid, name | ØªØºÛŒÛŒØ± Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± | [ğŸ“–](docs/EXAMPLES.md#1-Ø§Ø±Ø³Ø§Ù„-Ø¯Ø³ØªÙˆØ±-Ø³ÙØ§Ø±Ø´ÛŒ-raw-command) |
| `cleanadmin` | `sendRawCommand($serial, 'cleanadmin', [...])` | - | Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ø§Ø¯Ù…ÛŒÙ†â€ŒÙ‡Ø§ | [ğŸ“–](docs/EXAMPLES.md#1-Ø§Ø±Ø³Ø§Ù„-Ø¯Ø³ØªÙˆØ±-Ø³ÙØ§Ø±Ø´ÛŒ-raw-command) |

### Ù†Ú©Ø§Øª Ù…Ù‡Ù…

- âœ… **Ø¯Ø³ØªÙˆØ±Ø§Øª Ø®ÙˆØ¯Ú©Ø§Ø±:** `reg`, `senduser`, `sendlog`, `sendqrcode` ØªÙˆØ³Ø· Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®ÙˆØ¯Ø´ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- âœ… **Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±:** ØªÙ…Ø§Ù… Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø± Ø¬Ø¯ÙˆÙ„ `device_commands` Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- âœ… **ÙˆØ¶Ø¹ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±:** ÙˆØ¶Ø¹ÛŒØª Ø¯Ø³ØªÙˆØ±Ø§Øª (PENDING â†’ SENT â†’ SUCCESS/FAILED) Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âš ï¸ **Ø¯Ø³ØªÙˆØ±Ø§Øª Ø®Ø·Ø±Ù†Ø§Ú©:** `initsys` Ùˆ `cleanadmin` Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ø§Ø­ØªÛŒØ§Ø· Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆÙ†Ø¯

### Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡

```php
use Sajadsoft\BiometricDevices\Facades\BiometricDevice;
use Sajadsoft\BiometricDevices\DTOs\Commands\AddUserDTO;
use Sajadsoft\BiometricDevices\Enums\BiometricType;

// Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±
$dto = new AddUserDTO(
    employeeId: 1001,
    name: 'Ø¹Ù„ÛŒ Ø§Ø­Ù…Ø¯ÛŒ',
    biometricType: BiometricType::FACE_0,
    biometricData: 'BASE64_TEMPLATE',
    isAdmin: false
);
BiometricDevice::addUser('DEVICE_SERIAL', $dto);

// Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø±Ø¨
BiometricDevice::openDoor('DEVICE_SERIAL', doorNumber: 1);

// Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡
BiometricDevice::getDeviceInfo('DEVICE_SERIAL');
```

Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ØŒ [Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡](docs/USAGE.md) Ø±Ø§ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ù†ÛŒØ¯.

---

## Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯

| Ø±ÙˆÛŒØ¯Ø§Ø¯ | Properties | ØªÙˆØ¶ÛŒØ­Ø§Øª |
|-------|-----|-------------|
| `DeviceConnected` | `$deviceSerial`, `$deviceInfo` (DTO), `$device` (Model) | Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù…ØªØµÙ„ Ø´Ø¯ + Device Ø®ÙˆØ¯Ú©Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ |
| `DeviceDisconnected` | `$deviceSerial`, `$disconnectedAt` | Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù‚Ø·Ø¹ Ø´Ø¯ + ÙˆØ¶Ø¹ÛŒØª offline Ø®ÙˆØ¯Ú©Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ |
| `AttendanceReceived` | `$attendance` (DTO) | Ø­Ø¶ÙˆØ±/ØªØ±Ø¯Ø¯ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ |
| `QrCodeReceived` | `$qrCode` (DTO) | QR code Ø§Ø³Ú©Ù† Ø´Ø¯ (Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ø² QR/Barcode Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯) |
| `UserListReceived` | `$deviceSerial`, `$users` (DTO[]) | Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ |
| `UserInfoReceived` | `$deviceSerial`, `$user` (DTO) | Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ÛŒÙˆÙ…ØªØ±ÛŒÚ© âš ï¸ ÙÙ‚Ø· Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ command ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ |
| `CommandSent` | `$deviceSerial`, `$commandName`, `$dto`, `$command` (Model) | Ø¯Ø³ØªÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ + Command Ø®ÙˆØ¯Ú©Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ |
| `CommandResponseReceived` | `$deviceSerial`, `$commandName`, `$success`, `$data` | Ù¾Ø§Ø³Ø® Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ + ÙˆØ¶Ø¹ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡ |

> **Ù†Ú©ØªÙ‡:** Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ZKTeco Ø¨Ù‡ ØµÙˆØ±Øª Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ØŒ Ø§Ù…Ø§ `UserInfoReceived` ÙÙ‚Ø· Ø²Ù…Ø§Ù†ÛŒ trigger Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ Ø´Ù…Ø§ ÙˆØ§Ù‚Ø¹Ø§Ù‹ command `getUserInfo()` Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯. Ø§ÛŒÙ† Ø±ÙØªØ§Ø± Ø§Ø² Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒâ€ŒÙ…ÙˆØ±Ø¯ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

## Ù…Ø¯Ù„â€ŒÙ‡Ø§

### Device Model

Ù¾Ú©ÛŒØ¬ Ø´Ø§Ù…Ù„ Ù…Ø¯Ù„ `Device` Ù¾Ø§ÛŒÙ‡ Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

```php
use Sajadsoft\BiometricDevices\Models\Device;

// Scopes
Device::online()->get();  // Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†
Device::offline()->get(); // Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢ÙÙ„Ø§ÛŒÙ†

// Methods
$device->isOnline();      // bool
$device->markAsOnline();  // Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ†
$device->markAsOffline(); // Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø¢ÙÙ„Ø§ÛŒÙ†
$device->updateDeviceInfo(['key' => 'value']); // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ extra_attributes

// Relationships
$device->commands;         // ØªÙ…Ø§Ù… Ø¯Ø³ØªÙˆØ±Ø§Øª
$device->pendingCommands;  // Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±
$device->sentCommands;     // Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡
$device->successCommands;  // Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…ÙˆÙÙ‚
$device->failedCommands;   // Ø¯Ø³ØªÙˆØ±Ø§Øª Ù†Ø§Ù…ÙˆÙÙ‚
```

**Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ devices:**

| Ø³ØªÙˆÙ† | Ù†ÙˆØ¹ | ØªÙˆØ¶ÛŒØ­ |
|------|-----|-------|
| serial | string | Ø´Ù…Ø§Ø±Ù‡ Ø³Ø±ÛŒØ§Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡ (unique) |
| name | string | Ù†Ø§Ù… Ø¯Ø³ØªÚ¯Ø§Ù‡ |
| ip_address | string | Ø¢Ø¯Ø±Ø³ IP |
| port | integer | Ø´Ù…Ø§Ø±Ù‡ Ù¾ÙˆØ±Øª |
| is_online | boolean | ÙˆØ¶Ø¹ÛŒØª Ø¢Ù†Ù„Ø§ÛŒÙ†/Ø¢ÙÙ„Ø§ÛŒÙ† |
| last_connected_at | datetime | Ø¢Ø®Ø±ÛŒÙ† Ø²Ù…Ø§Ù† Ø§ØªØµØ§Ù„ |
| last_disconnected_at | datetime | Ø¢Ø®Ø±ÛŒÙ† Ø²Ù…Ø§Ù† Ù‚Ø·Ø¹ |
| extra_attributes | json | Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ (firmwareØŒ capacityØŒ ...) |

**Ù†Ú©ØªÙ‡:** Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§ÛŒÙ† Ù…Ø¯Ù„ Ø±Ø§ extend Ú©Ù†ÛŒØ¯ Ùˆ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯. [Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Extend Ú©Ø±Ø¯Ù† Models](EXTENDING-MODELS.md)

### DeviceCommand Model

Ù¾Ú©ÛŒØ¬ Ø´Ø§Ù…Ù„ Ù…Ø¯Ù„ `DeviceCommand` Ø¨Ø±Ø§ÛŒ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ø³Øª:

```php
use Sajadsoft\BiometricDevices\Models\DeviceCommand;

// Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø³ØªÙˆØ±Ø§Øª
$device = Device::find(1);
$pendingCommands = $device->pendingCommands;
$failedCommands = $device->failedCommands;

// Scopes
DeviceCommand::pending()->get();
DeviceCommand::success()->get();
DeviceCommand::failed()->get();

// Attributes
$command->command_data  // Ø¢Ø±Ø§ÛŒÙ‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø¯Ø³ØªÙˆØ±
$command->response_data // Ø¢Ø±Ø§ÛŒÙ‡ Ù¾Ø§Ø³Ø® Ø¯Ø³ØªÚ¯Ø§Ù‡
$command->status        // ÙˆØ¶Ø¹ÛŒØª (Enum)

// Methods
$command->markAsSent();
$command->markAsSuccess($responseData);
$command->markAsFailed($error, $responseData);
```

### Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ device_commands:

| Ø³ØªÙˆÙ† | Ù†ÙˆØ¹ | ØªÙˆØ¶ÛŒØ­ |
|------|-----|-------|
| device_id | bigint | Ø´Ù†Ø§Ø³Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡ |
| command_name | string | Ù†Ø§Ù… Ø¯Ø³ØªÙˆØ± |
| command_content | json | Ù…Ø­ØªÙˆØ§ÛŒ Ø¯Ø³ØªÙˆØ± |
| status | enum | pending, sent, success, failed |
| send_status | boolean | Ø¢ÛŒØ§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ØŸ |
| error_count | integer | ØªØ¹Ø¯Ø§Ø¯ Ø®Ø·Ø§Ù‡Ø§ |
| error_message | text | Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ |
| executed_at | datetime | Ø²Ù…Ø§Ù† Ø§Ø¬Ø±Ø§ |
| response | json | Ù¾Ø§Ø³Ø® Ø¯Ø³ØªÚ¯Ø§Ù‡ |

## DTOÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯

### DTOÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ (Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡)

#### `AttendanceDTO` - Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨

```php
AttendanceDTO {
    +employeeId: int                        // Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ù…Ù†Ø¯
    +employeeName: string                   // Ù†Ø§Ù… Ú©Ø§Ø±Ù…Ù†Ø¯
    +timestamp: Carbon                      // Ø²Ù…Ø§Ù† ØªØ±Ø¯Ø¯
    +verificationType: VerificationMode     // Ù†ÙˆØ¹ ØªØ£ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª (fingerprint, face, card, password)
    +isCheckIn: bool                        // ÙˆØ±ÙˆØ¯/Ø®Ø±ÙˆØ¬
    +temperature: ?float                    // Ø¯Ù…Ø§ÛŒ Ø¨Ø¯Ù† (Ø¯Ø± ØµÙˆØ±Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡)
    +deviceSerial: string                   // Ø´Ù…Ø§Ø±Ù‡ Ø³Ø±ÛŒØ§Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡
    +photoBase64: ?string                   // Ø¹Ú©Ø³ (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯)
    +cardNumber: ?int                       // Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡
    +password: ?int                         // Ù¾Ø³ÙˆØ±Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
    +eventType: ?AttendanceEventType        // Ù†ÙˆØ¹ Ø±ÙˆÛŒØ¯Ø§Ø¯ (ÙˆØ±ÙˆØ¯ØŒ Ø®Ø±ÙˆØ¬ØŒ Ø§Ø³ØªØ±Ø§Ø­ØªØŒ Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø§Ø±ÛŒ)
    +workCode: ?int                         // Ú©Ø¯ Ú©Ø§Ø± (Ø¯Ø± ØµÙˆØ±Øª Ø§Ø³ØªÙØ§Ø¯Ù‡)
    +rawData: array                         // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù… Ø¯Ø³ØªÚ¯Ø§Ù‡
}
```

**ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ù…ÙÛŒØ¯:**
- `cardNumber`: ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ú©Ø§Ø±Øª ØªØ±Ø¯Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯
- `password`: ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù¾Ø³ÙˆØ±Ø¯ ÙˆØ§Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ù¾Ø³ÙˆØ±Ø¯ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø§Ø³Øª
- `eventType`: Ù†ÙˆØ¹ Ø¯Ù‚ÛŒÙ‚ Ø±ÙˆÛŒØ¯Ø§Ø¯ (ÙˆØ±ÙˆØ¯ Ø¹Ø§Ø¯ÛŒØŒ Ø§Ø³ØªØ±Ø§Ø­ØªØŒ Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø§Ø±ÛŒ Ùˆ...)
- `workCode`: Ø¨Ø±Ø®ÛŒ Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ Ø§Ø² Ú©Ø¯ Ú©Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯

#### `QrCodeDTO` - Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ QR Code / Barcode

```php
QrCodeDTO {
    +qrCodeData: string      // Ù…Ø­ØªÙˆØ§ÛŒ QR code / Barcode
    +deviceSerial: string    // Ø´Ù…Ø§Ø±Ù‡ Ø³Ø±ÛŒØ§Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡
    +timestamp: Carbon       // Ø²Ù…Ø§Ù† Ø§Ø³Ú©Ù†
    +employeeId: ?int        // Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ù…Ù†Ø¯ (Ø¯Ø± ØµÙˆØ±Øª Ù…Ø±ØªØ¨Ø· Ø¨ÙˆØ¯Ù†)
    +rawData: array          // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù… Ø¯Ø³ØªÚ¯Ø§Ù‡
}
```

**Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡:**
```php
// app/Listeners/ProcessQrCodeScan.php
Event::listen(QrCodeReceived::class, function($event) {
    $qrCode = $event->qrCode;
    
    Log::info('QR Code scanned', [
        'device' => $qrCode->deviceSerial,
        'content' => $qrCode->qrCodeData,
    ]);
    
    // Ù¾Ø±Ø¯Ø§Ø²Ø´ QR code (URL, JSON, plain text, etc.)
});
```

> **Ù†Ú©ØªÙ‡:** Ù‚Ø§Ø¨Ù„ÛŒØª QR Code / Barcode ÙÙ‚Ø· Ø¯Ø± Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ø² Ø§ÛŒÙ† ÙˆÛŒÚ˜Ú¯ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ ÙØ¹Ø§Ù„ Ø§Ø³Øª (Ù…Ø«Ù„ Ø¨Ø±Ø®ÛŒ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ AiFace).

#### `UserDTO` - Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ÛŒÙˆÙ…ØªØ±ÛŒÚ©
- `EnrollmentDTO` - Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±
- `DeviceInfoDTO` - Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡

### DTOÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ÛŒ (Ø¨Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡)

- `AddUserDTO` - Ø§ÙØ²ÙˆØ¯Ù†/ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±
- `DeleteUserDTO` - Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±
- `OpenDoorDTO` - Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø±Ø¨
- `GetUserListDTO` - Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
- `SetAccessScheduleDTO` - ØªÙ†Ø¸ÛŒÙ… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ
- `SetUserAccessDTO` - ØªÙ†Ø¸ÛŒÙ… Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±

## Ù…ØªØ¯Ù‡Ø§ÛŒ Facade

```php
// Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
BiometricDevice::addUser(string $serial, AddUserDTO $dto);
BiometricDevice::deleteUser(string $serial, DeleteUserDTO $dto);
BiometricDevice::getUserList(string $serial);

// Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡
BiometricDevice::openDoor(string $serial, OpenDoorDTO $dto);
BiometricDevice::getDeviceInfo(string $serial);
BiometricDevice::reboot(string $serial);
BiometricDevice::initSystem(string $serial);

// Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ
BiometricDevice::setUserAccess(string $serial, SetUserAccessDTO $dto);
```

## Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú†Ù†Ø¯ Ù†ÙˆØ¹ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¨Ù‡ Ø·ÙˆØ± Ù‡Ù…Ø²Ù…Ø§Ù†

Ù¾Ú©ÛŒØ¬ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‡Ù…Ø²Ù…Ø§Ù† Ú†Ù†Ø¯ Ù†ÙˆØ¹ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù…Ø®ØªÙ„Ù Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

### ØªÙ†Ø¸ÛŒÙ… Ù†ÙˆØ¹ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³

Ù‡Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ `type` Ù…Ø®ØµÙˆØµ Ø¨Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯:

```php
use Sajadsoft\BiometricDevices\Models\Device;
use Sajadsoft\BiometricDevices\Enums\DeviceModel;

// Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÚ¯Ø§Ù‡ AIFace
$aifaceDevice = Device::create([
    'serial' => 'AIFACE001',
    'name' => 'AIFace Main Entrance',
    'type' => DeviceModel::AI_FACE,
    'ip_address' => '192.168.1.100',
    'port' => 7788,
]);

// Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÚ¯Ø§Ù‡ ZKTeco
$zktecoDevice = Device::create([
    'serial' => 'ZKTECO001',
    'name' => 'ZKTeco Back Door',
    'type' => DeviceModel::ZK_TECO,
    'ip_address' => '192.168.1.101',
    'port' => 7788,
]);
```

### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² MapperFactory

Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¨Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙØŒ Ø§Ø² `MapperFactory` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:

```php
use Sajadsoft\BiometricDevices\Services\MapperFactory;

// Ø¯Ø±ÛŒØ§ÙØª mapper Ù…Ø®ØµÙˆØµ Ù‡Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡
$device = Device::find($deviceId);

// Ø§ÛŒØ¬Ø§Ø¯ mapper Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ Ø¯Ø³ØªÚ¯Ø§Ù‡
$mapper = MapperFactory::create(
    $device->type->value,  // 'aiface' or 'zkteco'
    'websocket'            // protocol
);

// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² mapper
$attendanceDTO = $mapper->mapToAttendanceDTO($rawData);
```

### ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø­ÛŒØ·

Ø¯Ø± ÙØ§ÛŒÙ„ `.env` Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù†ÙˆØ¹ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø±Ø§ ØªØ¹ÛŒÛŒÙ† Ú©Ù†ÛŒØ¯:

```env
BIOMETRIC_DEVICE_TYPE=aiface  # ÛŒØ§ zkteco
BIOMETRIC_DRIVER=websocket
```

## Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ

DataMapper Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯:

```php
use Sajadsoft\BiometricDevices\Contracts\DataMapperInterface;

class MyDeviceMapper implements DataMapperInterface
{
    public function mapToAttendanceDTO(array $data): AttendanceDTO
    {
        // ØªØ¨Ø¯ÛŒÙ„ ÙØ±Ù…Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø´Ù…Ø§ Ø¨Ù‡ DTO Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
        return new AttendanceDTO(
            employeeId: $data['user_id'],
            employeeName: $data['username'],
            // ...
        );
    }
    
    public function mapAddUserCommand(AddUserDTO $dto): array
    {
        // ØªØ¨Ø¯ÛŒÙ„ DTO Ø¨Ù‡ ÙØ±Ù…Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø´Ù…Ø§
        return [
            'action' => 'add_employee',
            'emp_id' => $dto->employeeId,
            // ...
        ];
    }
}
```

Ø«Ø¨Øª Ø¯Ø± ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ:

```php
'custom_mappers' => [
    'my-device' => \App\Mappers\MyDeviceMapper::class,
],
```

## ØªØ³Øª

```bash
composer test
```

## Extend Ú©Ø±Ø¯Ù† Models

Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Model Ù‡Ø§ÛŒ Device Ùˆ DeviceCommand Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ extend Ú©Ù†ÛŒØ¯:

```php
// app/Models/Device.php
namespace App\Models;

use Sajadsoft\BiometricDevices\Models\Device as BaseDevice;

class Device extends BaseDevice
{
    public function getFillable()
    {
        return array_merge(parent::getFillable(), [
            'club_id',
            'device_type',
            'status',
        ]);
    }
    
    public function club()
    {
        return $this->belongsTo(Club::class);
    }
}
```

Ø³Ù¾Ø³ Ø¯Ø± `config/biometric-devices.php` Ù…Ø¹Ø±ÙÛŒ Ú©Ù†ÛŒØ¯:

```php
'models' => [
    'device' => \App\Models\Device::class,
],
```

Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„: [EXTENDING-MODELS.md](EXTENDING-MODELS.md)

## ğŸ“š Ù…Ø³ØªÙ†Ø¯Ø§Øª

### Ø±Ø§Ù‡Ù†Ù…Ø§Ù‡Ø§ÛŒ Ú©Ø§Ù…Ù„

- **[ğŸ“– Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ (Usage Guide)](docs/USAGE.md)** - Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ø§Ù…Ø¹ Ø¨Ø§ Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ
- **[ğŸ’¡ Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ (Advanced Examples)](docs/EXAMPLES.md)** - Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Integration Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
- **[ğŸ”§ Ú¯Ø³ØªØ±Ø´ Ù…Ø¯Ù„â€ŒÙ‡Ø§ (Extending Models)](docs/EXTENDING-MODELS.md)** - Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Extend Ú©Ø±Ø¯Ù† Models

### Quick Links

| Ø¨Ø®Ø´ | Ù„ÛŒÙ†Ú© |
|-----|------|
| Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ | [Installation Guide](docs/USAGE.md#Ù†ØµØ¨-Ùˆ-Ø±Ø§Ù‡Ø§Ù†Ø¯Ø§Ø²ÛŒ) |
| Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† | [User Management](docs/USAGE.md#Ù…Ø¯ÛŒØ±ÛŒØª-Ú©Ø§Ø±Ø¨Ø±Ø§Ù†) |
| Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡ | [Device Control](docs/USAGE.md#Ú©Ù†ØªØ±Ù„-Ø¯Ø³ØªÚ¯Ø§Ù‡) |
| Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ | [Events Guide](docs/USAGE.md#Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§) |
| Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡ | [Advanced Usage](docs/USAGE.md#Ø§Ø³ØªÙØ§Ø¯Ù‡-Ù¾ÛŒØ´Ø±ÙØªÙ‡) |
| Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ | [Troubleshooting](docs/USAGE.md#Ø¹ÛŒØ¨ÛŒØ§Ø¨ÛŒ-troubleshooting) |

## Ø³Ø§Ø®ØªØ§Ø± Ù¾Ú©ÛŒØ¬

```
packages/laravel-biometric-devices/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ biometric-devices.php       # ØªÙ†Ø¸ÛŒÙ…Ø§Øª
â”œâ”€â”€ database/
â”‚   â””â”€â”€ migrations/
â”‚       â”œâ”€â”€ ...create_devices_table.php
â”‚       â””â”€â”€ ...create_device_commands_table.php
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ Device.php              # Base Model (Ù‚Ø§Ø¨Ù„ extend)
â”‚   â”‚   â””â”€â”€ DeviceCommand.php       # Command tracking
â”‚   â”œâ”€â”€ Enums/
â”‚   â”‚   â”œâ”€â”€ DeviceCommandStatusEnum.php
â”‚   â”‚   â”œâ”€â”€ BiometricType.php
â”‚   â”‚   â””â”€â”€ VerificationMode.php
â”‚   â”œâ”€â”€ Events/                     # Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§
â”‚   â”œâ”€â”€ DTOs/                       # Data Transfer Objects
â”‚   â”œâ”€â”€ Services/                   # Handlers, Drivers, Mappers
â”‚   â””â”€â”€ BiometricDeviceManager.php  # Manager Ø§ØµÙ„ÛŒ
â””â”€â”€ README.md
```

## Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§

- PHP 8.2 ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±
- Laravel 11.0 ÛŒØ§ 12.0 ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±
- Ø§ÙØ²ÙˆÙ†Ù‡ Socket ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
- Ø¬Ø¯ÙˆÙ„ `devices` Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ (Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯)

## Ù…Ø¬ÙˆØ²

Ù…Ø¬ÙˆØ² MIT

## Ø§Ø¹ØªØ¨Ø§Ø±

Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ Ø¬Ø§Ù…Ø¹Ù‡ Ù„Ø§Ø±Ø§ÙˆÙ„

## Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ùˆ Ø³ÙˆØ§Ù„Ø§Øª:
- [GitHub Issues](https://github.com/sajadsoft1/biometric-device/issues)
- [Ù…Ø³ØªÙ†Ø¯Ø§Øª](https://github.com/sajadsoft1/biometric-device/wiki)

